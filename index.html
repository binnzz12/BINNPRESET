<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Binnpreset - JJ & Preset</title>
<style>
body{margin:0;padding:0;font-family:sans-serif;background:#020617;color:#e5e7eb;}
header{padding:1rem;background:#111;display:flex;justify-content:space-between;align-items:center;}
#logo{cursor:pointer;font-weight:bold;}
nav a{color:#cbd5f5;margin-left:1rem;text-decoration:none;}
.section{padding:2rem;}
.template-wrapper{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;}
.template{background:#111;border:1px solid #444;padding:0.5rem;border-radius:12px;display:flex;flex-direction:column;align-items:center;}
.template-title{color:#38bdf8;margin:0.5rem 0;text-align:center;}
button{padding:0.5rem 1rem;margin:0.2rem;border:none;border-radius:12px;background:linear-gradient(135deg,#38bdf8,#6366f1);color:#fff;cursor:pointer;}
#devPanel{display:none;position:fixed;bottom:1rem;right:1rem;background:rgba(2,6,23,.95);padding:1rem;border-radius:12px;z-index:999;max-width:320px;}
.drag-area{border:2px dashed #38bdf8;padding:1rem;border-radius:12px;text-align:center;margin-bottom:1rem;cursor:pointer;}
.drag-area.dragover{background:rgba(56,189,248,.1);}
form{max-width:480px;margin:auto;background:rgba(2,6,23,.75);padding:2rem;border-radius:18px;border:1px solid rgba(255,255,255,.08);}
.form-group{margin-bottom:1rem;display:flex;flex-direction:column;}
label{margin-bottom:.3rem;font-weight:500;}
input,textarea{width:100%;padding:.75rem;border-radius:12px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.05);color:#fff;}
</style>
</head>
<body>

<header>
  <div id="logo">BINNPRESET</div>
  <nav>
    <a href="#template">Template</a>
    <a href="#contact">Contact</a>
    <a href="https://www.tiktok.com/@USERNAME" target="_blank">TikTok</a>
  </nav>
</header>

<section id="home" class="section">
  <h1>BINNPRESET</h1>
  <p>Creator JJ • Preset • Typography</p>
  <p>Binnpreset lahir pada 29-10-2007. Sejak SMP kelas 2 sering diremehkan. Dari situlah motivasi membuat konten JJ / preset. Memasuki SMKN 8, awal adaptasi dengan DKV. Kelas 11 mulai membuat konten cinematic drone, setup kamera, dan produksi kreatif. Tetap sabar meski dihina atau difitnah. Ini perjalanan Binnpreset.</p>
</section>

<section id="template" class="section">
  <h2>Template</h2>
  <div class="template-wrapper" id="templateWrapper"></div>
</section>

<section id="contact" class="section">
  <h2>Contact</h2>
  <form action="https://api.web3forms.com/submit" method="POST" id="web3ContactForm">
    <input type="hidden" name="access_key" value="138dc640-da62-406a-8927-1a6dbb3de571">
    <div class="form-group">
      <label for="contactName">Nama</label>
      <input type="text" id="contactName" name="name" placeholder="Masukkan nama" required>
    </div>
    <div class="form-group">
      <label for="contactEmail">Email</label>
      <input type="email" id="contactEmail" name="email" placeholder="Masukkan email" required>
    </div>
    <div class="form-group">
      <label for="contactMessage">Pesan</label>
      <textarea id="contactMessage" name="message" rows="4" placeholder="Tulis pesanmu di sini" required></textarea>
    </div>
    <button type="submit">Kirim</button>
    <div id="formResponse" style="display:none;color:#38bdf8;margin-top:0.5rem;"></div>
  </form>
</section>

<!-- Dev Panel -->
<div id="devPanel">
  <h3>Developer Panel</h3>
  <div class="drag-area" id="dragArea">Drop file video atau klik untuk input TikTok link</div>
  <input type="text" id="devTitle" placeholder="Nama Template" style="width:100%;padding:0.5rem;margin-bottom:0.5rem;border-radius:8px;border:none;">
  <button id="saveEdit">Tambah Template</button>
  <hr>
  <div id="devTemplateList"></div>
</div>

<script>
const logo=document.getElementById("logo");
const devPanel=document.getElementById("devPanel");
const dragArea=document.getElementById("dragArea");
const devTitle=document.getElementById("devTitle");
const saveEdit=document.getElementById("saveEdit");
const templateWrapper=document.getElementById("templateWrapper");
const devTemplateList=document.getElementById("devTemplateList");

let currentFile=null;
let currentLink="";

// Dev Mode
let clickCount=0;
logo.onclick=()=>{
  clickCount++;
  if(clickCount===1) setTimeout(()=>clickCount=0,2000);
  if(clickCount===5){
    const key=prompt("Masukkan kunci developer");
    if(key==="binnprst"){
      localStorage.setItem("DEV","1"); document.body.classList.add("dev"); devPanel.style.display="block"; alert("Developer Mode aktif!");
    } else alert("Kunci salah!");
    clickCount=0;
  }
};
if(localStorage.getItem("DEV")){ devPanel.style.display="block"; }

// Drag & Drop
dragArea.addEventListener("dragover",e=>{e.preventDefault(); dragArea.classList.add("dragover");});
dragArea.addEventListener("dragleave",e=>{dragArea.classList.remove("dragover");});
dragArea.addEventListener("drop",e=>{
  e.preventDefault(); dragArea.classList.remove("dragover");
  if(e.dataTransfer.files.length){ currentFile=e.dataTransfer.files[0]; currentLink=""; dragArea.textContent=`File dipilih: ${currentFile.name}`; }
});
dragArea.addEventListener("click",()=>{
  const link=prompt("Masukkan link TikTok (atau biarkan kosong untuk file)");
  if(link){ currentLink=link; currentFile=null; dragArea.textContent="TikTok link siap ditambahkan"; }
});

// Save Template
saveEdit.onclick=()=>{
  const title=devTitle.value.trim(); if(!title){alert("Masukkan nama template");return;}
  let templates=JSON.parse(localStorage.getItem("templates")||"[]");
  if(currentFile){
    const reader=new FileReader();
    reader.onload=()=>{
      templates.push({title,type:"video",src:reader.result});
      localStorage.setItem("templates",JSON.stringify(templates));
      renderTemplates(); renderDevList();
      currentFile=null; devTitle.value=""; dragArea.textContent="Drop file video atau klik untuk input TikTok link";
    };
    reader.readAsDataURL(currentFile);
  } else if(currentLink){
    templates.push({title,type:"tiktok",src:currentLink});
    localStorage.setItem("templates",JSON.stringify(templates));
    renderTemplates(); renderDevList();
    currentLink=""; devTitle.value=""; dragArea.textContent="Drop file video atau klik untuk input TikTok link";
  } else alert("Pilih file atau link TikTok terlebih dahulu");
};

// Render Templates
function renderTemplates(){
  let templates=JSON.parse(localStorage.getItem("templates")||"[]");
  templateWrapper.innerHTML="";
  templates.forEach((t,index)=>{
    const div=document.createElement("div"); div.className="template";
    const titleEl=document.createElement("div"); titleEl.className="template-title"; titleEl.textContent=t.title;
    div.appendChild(titleEl);
    if(t.type==="video"){
      const video=document.createElement("video");
      video.src=t.src; video.controls=true; video.playsInline=true; video.style.width="100%"; video.style.aspectRatio="4/5";
      div.appendChild(video);
    } else if(t.type==="tiktok"){
      const iframe=document.createElement("iframe");
      iframe.src=t.src.replace("www.tiktok.com","www.tiktok.com/embed"); iframe.width="300"; iframe.height="533"; iframe.frameBorder="0"; iframe.allow="autoplay; fullscreen";
      div.appendChild(iframe);
    }
    templateWrapper.appendChild(div);
  });
}

// Dev List
function renderDevList(){
  let templates=JSON.parse(localStorage.getItem("templates")||"[]");
  devTemplateList.innerHTML="";
  templates.forEach((t,index)=>{
    const div=document.createElement("div"); div.style.marginBottom="5px";
    div.innerHTML=`<strong>${t.title}</strong><br><button onclick="editTemplate(${index})">Edit</button><button onclick="deleteTemplate(${index})">Hapus</button>`;
    devTemplateList.appendChild(div);
  });
}
window.editTemplate=(index)=>{
  let templates=JSON.parse(localStorage.getItem("templates")||"[]");
  const t=templates[index];
  const newTitle=prompt("Nama template:",t.title);
  if(newTitle){ templates[index].title=newTitle; localStorage.setItem("templates",JSON.stringify(templates)); renderTemplates(); renderDevList(); }
};
window.deleteTemplate=(index)=>{
  if(!confirm("Hapus template ini?")) return;
  let templates=JSON.parse(localStorage.getItem("templates")||"[]"); templates.splice(index,1); localStorage.setItem("templates",JSON.stringify(templates));
  renderTemplates(); renderDevList();
};

// Load Templates
window.onload=()=>{ renderTemplates(); if(localStorage.getItem("DEV")) devPanel.style.display="block"; };

// Web3Forms
const web3Form=document.getElementById('web3ContactForm');
const formResponse=document.getElementById('formResponse');
if(web3Form){
  web3Form.addEventListener('submit', async e=>{
    e.preventDefault();
    const formData=new FormData(web3Form);
    try{
      const res=await fetch(web3Form.action,{method:"POST",body:formData});
      const data=await res.json();
      if(data.success){ formResponse.textContent="✅ Pesan berhasil dikirim!"; formResponse.style.display="block"; web3Form.reset();}
      else{ formResponse.textContent="❌ Terjadi kesalahan, coba lagi!"; formResponse.style.display="block";}
    }catch(err){ formResponse.textContent="❌ Network error, cek koneksi!"; formResponse.style.display="block";}
  });
}
</script>
</body>
</html>
